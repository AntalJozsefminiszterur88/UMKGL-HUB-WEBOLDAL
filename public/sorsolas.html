<!DOCTYPE html>
<html lang="hu">
  <head>
    <meta charset="UTF-8" />
    <title>UMGKL HUB - Hoi4 Sorsol√°s</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/png" href="program_icons/oldal_logo.png" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;700&family=Roboto+Condensed:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="HOI4-Porgonc/style.css" />
    <link rel="stylesheet" href="css/style.css" />
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
  </head>
  <body>
    <header>
      <!-- Placeholder banner image -->
      <img
        src="https://via.placeholder.com/1200x300?text=Banner+k√©p"
        alt="Banner"
        class="banner"
      />
      <h1>UMGKL HUB</h1>
      <nav>
        <a href="home.html" data-section="home">F≈ëoldal</a>
        <a href="klipek.html" data-section="klipek">Klippek</a>
        <a href="sorsolas.html" data-section="sorsolas" class="active">Hoi4 Sorsol√°s</a>
        <a href="szavazas.html" data-section="szavazas">Szavaz√°s</a>
        <a
          href="programok.html"
          data-section="programok"
          id="programNavBtn"
          data-requires-admin="true"
          style="display: none;"
          >Programok</a
        >
        <a
          href="admin.html"
          data-section="admin"
          id="adminNavBtn"
          data-requires-admin="true"
          style="display: none;"
          >Admin M√≥d</a
        >
      </nav>
      <div class="auth-buttons">
        <div id="authLoggedOut" class="auth-buttons__group">
          <button id="loginBtn" type="button" class="auth-button">Bejelentkez√©s</button>
          <a href="register.html" id="registerBtn" class="auth-button">Regisztr√°ci√≥</a>
        </div>
        <div id="authLoggedIn" class="auth-buttons__group" style="display: none">
          <a href="profile.html" id="userProfileLink" data-section="profile" style="display: flex; align-items: center; text-decoration: none; color: inherit;">
            <img id="userAvatar" src="program_icons/default-avatar.png" alt="User Avatar" style="width: 40px; height: 40px; border-radius: 50%; margin-right: 10px;">
            <span id="userGreeting"></span>
          </a>
          <button id="logoutBtn" type="button" class="auth-button">Kijelentkez√©s</button>
        </div>
      </div>
    </header>

    <div id="loginModal">
      <div class="modal-content">
        <span id="closeLogin" style="float: right; cursor: pointer">&times;</span>
        <h2>Bejelentkez√©s</h2>
        <form id="loginForm">
          <input type="text" id="loginUser" placeholder="Felhaszn√°l√≥n√©v" required />
          <input type="password" id="loginPass" placeholder="Jelsz√≥" required />
          <button type="submit">Bel√©p√©s</button>
        </form>
      </div>
    </div>

    <div id="feedbackModal" class="feedback-modal" role="dialog" aria-modal="true" aria-labelledby="feedbackModalTitle" style="display: none">
      <div class="feedback-modal__content">
        <button id="feedbackModalClose" class="feedback-modal__close" type="button" aria-label="Bez√°r√°s">&times;</button>
        <h3 id="feedbackModalTitle" class="feedback-modal__title"></h3>
        <p id="feedbackModalMessage" class="feedback-modal__message"></p>
        <div class="feedback-modal__actions">
          <button id="feedbackModalOk" type="button">OK</button>
        </div>
      </div>
    </div>

    <main>
      <!-- Hoi4 Sorsol√°s -->
      <section id="sorsolas" class="active">
        <h1>HOI4 Road to 56 ‚Äì Sorsol√≥</h1>

        <div class="controls-top">
          <button id="resetAllBtn">Teljes Sorsol√°s Vissza√°ll√≠t√°sa</button>
        </div>

        <div class="options-panel">
          <label for="balanceCountriesByStrength">
            <input type="checkbox" id="balanceCountriesByStrength" checked />
            Orsz√°gok er≈ëss√©galap√∫ kiegyens√∫lyoz√°sa a csapatok k√∂z√∂tt
          </label>
        </div>

        <div class="last-picked-display">
          Legut√≥bb: J√°t√©kos: <span id="lastPickedPlayer">-</span> | Orsz√°g:
          <span id="lastPickedCountry">-</span>
        </div>

        <div id="spinResultOverlay" class="spin-result-overlay">
          <div id="spunItemDisplay" class="spun-item-display">Kip√∂rgetve: -</div>
          <button id="nextSpinStepButton" class="next-spin-step-button">
            K√∂vetkez≈ë
          </button>
        </div>

        <div class="flex">
          <div class="box">
            <h2>
              J√°t√©kosok <span class="count-display" id="playerListCount">(0)</span>
            </h2>
            <input id="playerName" type="text" placeholder="N√©v" />
            <input
              id="playerSkill"
              type="number"
              placeholder="K√©pess√©g 1‚Äì10"
              min="1"
              max="10"
            />
            <button id="addPlayerBtn" onclick="handlePlayerSubmit()">
              Hozz√°ad√°s
            </button>
            <ul id="playersList"></ul>
          </div>

          <div class="box">
            <h2>
              Orsz√°gok <span class="count-display" id="countryListCount">(0)</span>
            </h2>
            <input id="countryName" type="text" placeholder="Orsz√°g neve" />
            <input
              id="countryStrength"
              type="number"
              placeholder="Er≈ëss√©g 1-10"
              min="1"
              max="10"
            />
            <button id="addCountryBtn" onclick="handleCountrySubmit()">
              Hozz√°ad√°s
            </button>
            <ul id="countriesList"></ul>
          </div>

          <div class="box">
            <h2>Csapatok</h2>
            <div id="teamWheelContainer" class="wheel-container">
              <div class="pointer">‚óÑ</div>
              <canvas id="teamWheel" width="250" height="250"></canvas>
            </div>
            <button id="spinTeamBtn">Csapat oszt√°s / Forgat√°s</button>
            <h3>
              Csapat 1 j√°t√©kosok
              <span class="count-display" id="team1PlayerCount">(0)</span>
            </h3>
            <ul id="playerBasket1" class="player-basket"></ul>
            <h3>
              Csapat 2 j√°t√©kosok
              <span class="count-display" id="team2PlayerCount">(0)</span>
            </h3>
            <ul id="playerBasket2" class="player-basket"></ul>
          </div>

          <div class="box">
            <h2>
              Orsz√°gok <span class="count-display" id="countryBoxCount">(0)</span>
            </h2>
            <div id="countryWheelContainer" class="wheel-container">
              <div class="pointer">‚óÑ</div>
              <canvas id="countryWheel" width="250" height="250"></canvas>
            </div>
            <button id="spinCountryBtn">Orsz√°g oszt√°s / Forgat√°s</button>

            <div id="countryGridsContainer">
              <div class="team-grid-wrapper" id="team1CountryGridWrapper">
                <h3>
                  Csapat 1 orsz√°gok
                  <span class="count-display" id="team1CountryCount">(0/9)</span>
                  <button
                    class="grid-zoom-btn"
                    data-targetwrapper="team1CountryGridWrapper"
                    title="Nagy√≠t√°s/Kicsiny√≠t√©s"
                  >
                    üîç
                  </button>
                </h3>
                <div id="countrySlots1" class="basket-grid"></div>
              </div>
              <div class="team-grid-wrapper" id="team2CountryGridWrapper">
                <h3>
                  Csapat 2 orsz√°gok
                  <span class="count-display" id="team2CountryCount">(0/9)</span>
                  <button
                    class="grid-zoom-btn"
                    data-targetwrapper="team2CountryGridWrapper"
                    title="Nagy√≠t√°s/Kicsiny√≠t√©s"
                  >
                    üîç
                  </button>
                </h3>
                <div id="countrySlots2" class="basket-grid"></div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <footer>
      <p>¬© 2025 UMGKL HUB Minden jog fenntartva</p>
    </footer>

    <script src="js/app.js"></script>
    <script src="js/auth.js"></script>
    <script src="HOI4-Porgonc/script.js"></script>
  </body>
</html>
